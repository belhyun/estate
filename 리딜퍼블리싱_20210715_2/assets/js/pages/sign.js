!function(){var c,i,n=[].slice;function t(t,o){this.el=t,this.canvas=c(t),this.context=t.getContext("2d"),this.options=c.extend({toolLinks:!0,defaultTool:"marker",defaultColor:"#000000",defaultSize:2},o),this.painting=!1,this.color=this.options.defaultColor,this.size=this.options.defaultSize,this.tool=this.options.defaultTool,this.actions=[],this.action=[],this.canvas.bind("click mousedown mouseup mousemove mouseleave mouseout touchstart touchmove touchend touchcancel",this.onEvent),this.options.toolLinks&&c("body").delegate('a[href="#'+this.canvas.attr("id")+'"]',"click",function(t){for(var o,e=c(this),i=c(e.attr("href")).data("sketch"),n=["color","size","tool"],s=0,a=n.length;s<a;s++)o=n[s],e.attr("data-"+o)&&i.set(o,c(this).attr("data-"+o));return c(this).attr("data-download")&&i.download(c(this).attr("data-download")),!1})}(c=jQuery).fn.sketch=function(){var t,o=arguments[0],e=2<=arguments.length?n.call(arguments,1):[];return 1<this.length&&c.error("Sketch.js can only be called on one element at a time."),t=this.data("sketch"),"string"==typeof o&&t?t[o]?"function"==typeof t[o]?t[o].apply(t,e):0===e.length?t[o]:1===e.length?t[o]=e[0]:void 0:c.error("Sketch.js did not recognize the given command."):t||(this.data("sketch",new i(this.get(0),o)),this)},t.prototype.download=function(t){t="image/"+(t="jpg"===(t=t||"png")?"jpeg":t);return window.open(this.el.toDataURL(t))},t.prototype.set=function(t,o){return this[t]=o,this.canvas.trigger("sketch.change"+t,o)},t.prototype.startPainting=function(){return this.painting=!0,this.action={tool:this.tool,color:this.color,size:parseFloat(this.size),events:[]}},t.prototype.stopPainting=function(){return this.action&&this.actions.push(this.action),this.painting=!1,this.action=null,this.redraw()},t.prototype.onEvent=function(t){return t.originalEvent&&t.originalEvent.targetTouches&&(t.pageX=t.originalEvent.targetTouches[0].pageX,t.pageY=t.originalEvent.targetTouches[0].pageY),c.sketch.tools[c(this).data("sketch").tool].onEvent.call(c(this).data("sketch"),t),t.preventDefault(),!1},t.prototype.redraw=function(){var t;if(this.context=this.el.getContext("2d"),t=this,c.each(this.actions,function(){if(this.tool)return c.sketch.tools[this.tool].draw.call(t,this)}),this.painting&&this.action)return c.sketch.tools[this.action.tool].draw.call(t,this.action)},i=t,c.sketch={tools:{}},c.sketch.tools.marker={onEvent:function(t){switch(t.type){case"mousedown":case"touchstart":this.painting&&this.stopPainting(),this.startPainting();break;case"mouseup":case"mouseout":case"mouseleave":case"touchend":case"touchcancel":this.stopPainting()}if(this.painting)return this.action.events.push({x:t.pageX-this.canvas.offset().left,y:t.pageY-this.canvas.offset().top,event:t.type}),this.redraw()},draw:function(t){var o,e,i,n;for(this.context.lineJoin="round",this.context.lineCap="round",this.context.beginPath(),this.context.moveTo(t.events[0].x,t.events[0].y),e=0,i=(n=t.events).length;e<i;e++)o=n[e],this.context.lineTo(o.x,o.y),0;return this.context.strokeStyle=t.color,this.context.lineWidth=t.size,this.context.stroke()}},c.sketch.tools.eraser={onEvent:function(t){return c.sketch.tools.marker.onEvent.call(this,t)},draw:function(t){var o=this.context.globalCompositeOperation;return this.context.globalCompositeOperation="destination-out",t.color="rgba(0,0,0,1)",c.sketch.tools.marker.draw.call(this,t),this.context.globalCompositeOperation=o}}}.call(this),function(h){h.fn.SignaturePad=function(t){var o,e,i,n,s=h.extend({allowToSign:!0,img64:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",border:"1px solid #f8f9fa",width:"300px",height:"150px",callback:function(){return!0}},t),a=h("#signPadBig"),c=h("#signPadBigBackDrop"),r=void 0;return 0==a.length?((c=h("<div>")).css("position","fixed"),c.css("top","0"),c.css("right","0"),c.css("bottom","0"),c.css("left","0"),c.css("z-index","1040 !important"),c.css("background-color","#000"),c.css("display","none"),c.css("filter","alpha(opacity=50)"),c.css("opacity","0.5"),h("body").append(c),(a=h("<div>")).css("display","none"),a.css("position","fixed"),a.css("margin","0 auto"),a.css("top","0"),a.css("bottom","0"),a.css("right","0"),a.css("left","0"),a.css("z-index","1000002 !important"),a.css("overflow","hidden"),a.css("outline","0"),a.css("-webkit-overflow-scrolling","touch"),a.css("right","0"),a.css("border","1px solid #c8c8c8"),a.css("padding","15px"),a.css("background-color","white"),a.css("margin-top","15px"),a.css("width","95%"),a.css("height","300px"),a.css("border-radius","6px"),a.css("z-index","10"),a.attr("id","signPadBig"),h("body").append(a),o=function(){var t=a.width(),o=a.height()-55;r.attr("width",t),r.attr("height",o)},(r=h("<canvas>")).css("display","block"),r.css("margin","0 auto"),r.css("border","1px solid #c8c8c8"),r.css("border-radius","6px"),a.append(r),o(),h(window).on("resize",function(){o()}),e=function(){return r.sketch().action=null,r.sketch().actions=[],r[0].getContext("2d").clearRect(0,0,r[0].width,r[0].height),!0},i=function(){var t=h.data(a[0],"control");return h(t).val()},n=function(){var t=r[0].toDataURL("image/png"),o=new Image;o.onload=function(){var t=function(t,o,e){var i=document.createElement("canvas"),n=i.getContext("2d");return i.width=o,i.height=e,n.drawImage(t,0,0,o,e),i.toDataURL()}(this,e,i),o=h.data(a[0],"img");o&&h(o).attr("src",t);o=h.data(a[0],"control");o&&h(o).val(t)},o.src=t;var e=r.width(),i=r.height()},[{title:"Reset",callback:function(){e(),s.callback&&s.callback(i(),"clear")}},{title:"취소",callback:function(){e(),a.slideToggle(function(){c.hide("fade")})}},{title:"확인",callback:function(){n(),e(),a.slideToggle(function(){c.hide("fade",function(){s.callback&&s.callback(i(),"accept")})})}}].forEach(function(t){var o=h('<button class="btn btn-sign">');o.attr("type","button"),o.text(t.title),o.on("click",function(){t.callback(t.title)}),a.append(o)})):r=a.find("canvas")[0],r&&h(r).sketch({defaultColor:"#000",defaultSize:2}),this.each(function(){var t=h(this);t.hide();var o=t.parent(),e=h('<img class="cvimg">');e.css("cursor","pointer"),e.css("border",s.border),e.css("height",s.height),e.css("width",s.width),e.css("border-radius","5px"),e.attr("src",s.img64),"object"==typeof o&&o.append(e),1==s.allowToSign&&e.on("click",function(){c.show(),a.slideToggle(),h.data(a[0],"img",e),h.data(a[0],"control",t)})})}}(jQuery);